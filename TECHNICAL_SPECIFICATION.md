**Техническое задание:** Разработка приложения "Магазин цветов" на платформе WPF

**Студент:** Кожуховская Галина

**Группа:** 2307в


# 1. Описание проекта

## 1.1 Название системы
Система управления для магазина цветов на платформе WPF

## 1.2 Назначение
Система предназначена для автоматизации работы цветочного магазина. Позволяет управлять ассортиментом и заказами, а также обрабатывать оплату подписки на сервис для управление магазином.

# 2. Функциональные требования
## 2.1 Основные функции системы
### Функция 1: Добавление заказа
- **Описание:** Добавление нового заказа в систему. Пользователь вводит ФИО, контактные данные(телефон), товары, общую стоимость(считается автоматически), задает статус заказа. Система автоматически генерирует уникальный номер заказа и устанавливает дату заказа.
- **Входные данные:** ФИО, телефон, товары, статус заказа.
- **Результат:** Новый заказ добавлен в базу данных, выдан номер заказа

### Функция 2: Редактирование заказа
- **Описание:** Редактирование заказа в системе. Пользователь выбирает заказ, меняет нужные параметры заказа и нажимает кнопку сохранить.
- **Входные данные:** Идентификатор заказа, действие ("Сохранить")
- **Выходные данные:**  Подтверждение, что данные сохранены, и обновленная информация

### Функция 3: Удаление заказа
- **Описание:** Удаление заказа из системы. Пользователь выбирает заказ, нажимает кнопку удалить и подтверждает удаление.
- **Входные данные:** Идентификатор заказа, действие ("Потвердить)
- **Выходные данные:** Обновленный интерфейс (исчезновение заказа из списка),  логическое удаление записи в БД

### Функция 4: Добавление нового товара 
- **Описание:** Добавление нового товара в каталог. Пользователь выбирает категорию товара, вводит название, описание, стоимость, наличие(количество).Система автоматически генерирует уникальный номер товара.
- **Входные данные:** Категория товара, название, описание, стоимость, количество товара
- **Выходные данные:** Новый товар добавлен в базу данных и каталог, выдан номер товара

### Функция 5: Редактирование товара
- **Описание:** Редактирование товара в каталоге. Пользователь выбирает товар, меняет нужные параметры заказа и нажимает кнопку сохранить.
- **Входные данные:** Идентификатор заказа, действие ("Сохранить")
- **Выходные данные:** Потверждение, что данные сохранены, и  обновленная информация

### Функция 6: Удаление товара
- **Описание:** Удаление товара из каталога. Пользователь выбирает товар, нажимает кнопку удалить и подтверждает удаление.
- **Входные данные:**  Идентификатор заказа, действие ("Потвердить)
- **Выходные данные:** Обновленный интерфейс (исчезновение товара из каталога),  логическое удаление записи в БД

### Функция 7: Оплата подписки
- **Описание:** Пользователь может оплатить годовую или месячную подписку на использование сервиса для управления цветочным магазином. Выбирает тариф, вводит данные банковской карты (номер, срок действия, CVV). Система проверяет корректность данных, создаёт запись о платеже и, при успешной оплате, автоматически продлевает срок действия подписки.
- **Входные данные:** выбранный тариф, данные карты
- **Результат:** Платёж обработан, подписка продлена


# 3. Структура базы данных
### Таблица 1: Products (Товары)
**Описание:** Хранит информацию о товарах в магазине цветов.
**Поля:** 

- `Id` (int, PK) - уникальный идентификатор товара
- `Category` (string) - категория товара
- `Name` (string) - название товара
- `Description` (string) - описание товара
- `Price` (float) - цена за единицу товара
#### **Связи:**
- Связь один-ко-многим с таблицей `ProductOrder` (один товар может быть во многих заказах)

### Таблица 2: Orders (Заказы)
**Описание:** Хранит информацию о заказах в магазине цветов
**Поля:** 

- `Id` (int, PK) уникальный идентификатор заказа
- `CustomerName` (string) - ФИО заказчика
- `CustomerPhone` (int) - номер телефона заказчика
- `TotalPrice` (float) - общая сумма заказа
- `Status` (string) - статус заказа
- `OrderDate` (datetime) - дата создания заказа
#### **Связи:**
- Связь один-ко-многим с таблицей `ProductOrder` (один заказ может содержать много товаров)

### Таблица 3: ProductOrder (Продукты в заказе)
**Описание:** Связывающая таблица между товарами и заказами, так же хранит количество товара
- `Id` (int, PK) - уникальный идентификатор
- `IdProduct` (int, FK) - уникальный идентификатор товара
- `IdOrder` (int, FK) - уникальный идентификатор заказа
- `Quantity` (int) - количество товара
- `UnitPrice` (float) - цена товара на момент заказа
#### **Связи:**
- Связь один-ко-многим с таблицей `Product` (один товар может быть во многих заказах)
- Связь один-ко-многим с таблицей `Order` (один заказ может содержать много товаров)

### Таблица 4: Payment(Оплата)
**Описание:** Таблица для отслеживания оплаты подписки.
- `Id`(int,PK) - уникальный идентификатор
- `PaymentDate` (datetime)- дата оплаты подписки
- `SubscriptionExpiryDate` (datetime) - дата окончания подписки
- `TariffName` (string) - название тарифа (месячный,годовой и тп)
- `Amount` (float) - Сумма платежа
- `PaymentId` (int) - id из платежной системы (заменяет cvv и данные карты)
  
# 4. Основные формы приложения
### Форма 1: MainWindow (Главная форма)
**Назначение:** Главная форма приложения для управления цветочным магазином
**Элементы управления:** 
- TabControl - вкладки для разных разделов (Товары, Заказы, Подписка)
  #### Вкладка Товары
  - DataGrid - отображение списка товаров из базы данных
  - TextBox (поиск) - поле для поиска товара по его названию
    **Действия:**
  - Кнопка "Добавить товар" - открывает ProductEditWindow для создания нового товара
  - Кнопка "Редактировать" - открывает ProductEditwindow для редактирования выбранного товара
  - Кнопка "Удалить" - удаляет выбранный товар после подтверждения
  #### Вкладка Заказы
  - DataGrid - отображение списка заказов из базы данных
    **Действия:**
  - Кнопка "Добавить заказ" - открывает OrderEditwindow для создания нового заказа
  - Кнопка "Редактировать" - открывает OrderEditWindow для редактирования выбранного заказа
  - Кнопка "Удалить" - удалеяет выбранный товар после подтверждения
  #### Вкладка Подписка
  - TextBlock - отображение статуса подписки (активна/неактивна)
  - TextBlock - дата окончания подписки
   **Действия:**
  - Кнопка "Продлить подписку" - открывает PaymentWindow для оплаты подписки
  - Кнопка "Отменить подписку" - после подтверждения отменяет подписку

### Форма 2: ProductEditWindow(форма создания и редактирования)
**Назначение:** Форма для создания и редактирования товара
**Элементы управления:**
- TextBlock - описание вводимой информации
- TextBox - поле для ввода информации о товаре
**Действия:**
- Кнопка "Сохранить" - сохранение изменений
- Кнопка "Отменить" - закрытие формы без сохранения

### Форма 3: OrderEditWindow(форма создания и редактирования)
**Назначение:** Форма для создания и редактирования заказа
**Элементы управления:**
- TextBlock - описание вводимой информации
- TextBox - поле для ввода информации о заказе
**Действия:**
- Кнопка "Сохранить" - сохранение изменений
- Кнопка "Отменить" - закрытие формы без сохранения

### Форма 4: PaymentWindow (форма оплаты)
**Назначение:** Форма для проведения оплаты подписки на систему управления магазином цветов.
**Элементы управления:**
- ComboBox (тариф) — выбор тарифа подписки
- TextBox (номер карты) — ввод номера банковской карты
- TextBox (срок действия) — ввод срока действия карты (MM/YY)
- TextBox (CVV) — ввод кода безопасности
- TextBlock (сумма) — отображение суммы к оплате
**Действия:**
- Кнопка "Оплатить" — обработка платежа
- Кнопка "Отменить" — отмена операции

# 5. Схема переходов между формами
![Схема переходов](images/navigation.png)
